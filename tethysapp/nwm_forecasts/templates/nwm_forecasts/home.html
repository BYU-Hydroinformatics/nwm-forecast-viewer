{% extends "nwm_forecasts/base.html" %}

{% load tethys_gizmos %}
{% load staticfiles %}

{% block app_navigation_items %}
{{ block.super }}
<li class="active"><a href="">Home</a></li>
<li><a href="{% url 'nwm_forecasts:download' %}">Download</a></li>

{% if hs_ready|lower == "true" %}
    <br />
    <button id="watershedBtn" type="button" class="btn btn-primary" data-toggle="modal" data-target="#popup-load-watershed">Add Watershed</button>
    <br />
{%endif%}

<form id="paramForm" method="get" action="{% url 'nwm_forecasts:home' %}">
    {% gizmo select_input config_input %}
    {% gizmo select_input geom_input %}
    <div class="form-group ">
      <label class="control-label" for="variable">Variable</label>
      <select id="variable" class="form-control" name="variable">
        <option id="streamVar" value="streamflow" selected>Streamflow</option>
        <option id="velocVar" value="velocity">Velocity</option>
        <option id="infVar" value="inflow" class="hidden">Inflow</option>
        <option id="outfVar" value="outflow" class="hidden">Outflow</option>
        <option id="snowhVar" value="SNOWH" class="hidden">Snow Depth</option>
        <option id="sneqVar" value="SNEQV" class="hidden">Snow Water Equivalent</option>
        <option id="snowcVar" value="FSNO" class="hidden">Snow-cover</option>
        <option id="etVar" value="ACCET" class="hidden">Accumulated Total ET</option>
        <option id="ssVar" value="SOILSAT_TOP" class="hidden">Near Surface Soil Saturation</option>
        <option id="avsnowVar" value="SNOWT_AVG" class="hidden">Average Snow Temperature</option>
        <option id="subrunoffVar" value="UGDRNOFF" class="hidden">Accumulated Groundwater Runoff</option>
        <option id="runoffVar" value="SFCRNOFF" class="hidden">Accumulated Surface Runoff</option>
        <option id="evapVar" value="ACCECAN" class="hidden">Accumulated Canopy Evaporation</option>
        <option id="soiltVar" value="SOIL_T" class="hidden">Soil Temperature</option>
        <option id="soilmVar" value="SOIL_M" class="hidden">Volumetric Soil Moisture</option>
        <option id="canwVar" value="CANWAT" class="hidden">Total Canopy Water</option>
        <option id="ssiVar" value="SOILSAT" class="hidden">Soil Saturation (Column integrated)</option>
        <option id="rainrateVar" value="RAINRATE" class="hidden">Rain Rate</option>
      </select>
    </div>
    <div id="comidDiv">
      <label class="control-label" for="comidInput">COMID</label>
      <input id="comidInput" name="COMID" type="text" class="form-control form-group" data-toggle="tooltip"
             data-placement="top" title="Select stream reach from map or enter manually">
    </div>
    <div id="gridDiv" class="hidden">
      <label class="control-label" for="gridInputY">Grid Cell South-North Value</label>
      <input id="gridInputY" name="Y" type="text" class="form-control form-group" disabled>
      <label class="control-label" for="gridInputX">Grid Cell West-East Value</label>
      <input id="gridInputX" name="X" type="text" class="form-control form-group" disabled>
    </div>
    <input id="longInput" name="lon" type="text" value="-98" class="hidden">
    <input id="latInput" name="lat" type="text" value="38.5" class="hidden">

    {% gizmo date_picker start_date %}
    {% gizmo select_input start_time %}

    <div id="timeLag" class="hidden">
      <label>Time lag</label>
      <div class="row">
        <div class="col-md-1">
          <p>00z</p>
        </div>
        <div class="col-md-4">
          {% gizmo toggle_switch longRangeLag00 %}
        </div>
        <div class="col-md-1">
          <p>06z</p>
        </div>
        <div class="col-md-4">
          {% gizmo toggle_switch longRangeLag06 %}
        </div>
      </div>
      <div class="row">
        <div class="col-md-1">
          <p>12z</p>
        </div>
        <div class="col-md-4">
          {% gizmo toggle_switch longRangeLag12 %}
        </div>
        <div class="col-md-1">
          <p>18z</p>
        </div>
        <div class="col-md-4">
          {% gizmo toggle_switch longRangeLag18 %}
        </div>
      </div>
    </div>
    <label id="endDateLabel" class="control-label hidden" for="endDate">End Date</label>
    {% gizmo date_picker end_date %}
    <!--{% gizmo button submit_button %}-->
    <button name="submit" type="submit" class="btn btn-primary" type="submit" value="Success" id="submitBtn" form="paramForm">
  	  View Forecast
    </button>
  </form>

  <!--<input type="text" id="watershed_attributes_str" name="watershed_attributes_str" value='{{watershed_attributes_str}}' hidden >-->
  <!--<input type="text" id="watershed_geojson_str" name="watershed_geojson_str" value='{{watershed_geojson_str}}' hidden >-->


{% endblock%}


{% block app_content %}
  <div id="map-view" class="noGraph map-view"></div>
  <div id="mouse-position"></div>
  <div id="popup" class="noGraph"></div>
  <div id="info" class="hidden"></div>
  <br />
  <div id="nc-chart" class="hidden"></div>
{% endblock %}





{% block app_actions %}
  <div id="actionBtns" class="hidden">
    {% if waterml_url %}
      <a id="WMLbtn" target="_blank" href="{% url 'nwm_forecasts:waterml' %}{{waterml_url}}" class="btn btn-default">Get WaterML</a>
      <a id="HSbtn" class="btn btn-default hidden" data-toggle="modal" data-target="#hydroshare-modal" role="button">Add to HydroShare</a>
    {% endif %}
  </div>
{% endblock %}